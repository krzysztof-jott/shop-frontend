<h1>Koszyk</h1>

<!--14.0 dodaję formularz i idę do komponentu:-->
<!--18.0 zmieniam warunek summary items (dodaję length po items):-->
<form *ngIf="summary?.items?.length" [formGroup]="formGroup">
	<div>
		<div fxLayout="row" fxLayoutAlign="space-between start" class="card-hrow">
			<div class="cart-hcol-1">Obraz</div>
			<div class="cart-hcol-2">Nazwa</div>
			<div class="cart-hcol-3">Ilość</div>
			<div class="cart-hcol-4">Wartość</div>
	</div>
<!--		14.8 dodaję diva:-->
		<div formGroupName="items">
<!--		14.7 teraz zamiast summary items będę korzystać z gettera (usuwam summary?.). W pętli muszę dodać indeks jeszcze:-->
			<div *ngFor="let item of items; let i = index">
<!--				14.9 muszę ten index ustawić w kolejnym divie:-->
				<div [formGroupName]="i" fxLayout="row" fxLayoutAlign="space-between start" class="card-row">
					<div class="cart-col-1">
<!--						14.10 wszędzie po item dodaję value-->
						<a routerLink="{{'/products/' + item.value?.slug}}">
							<img *ngIf="!item.value?.product?.image" src="/assets/image-placeholder.png" width="100">
							<img *ngIf="item.value?.product?.image" src="{{'/api/data/productImage/' + item.value?.product?.image}}" width="100">
						</a>
					</div>
					<div class="cart-col-2">{{item.value?.product?.name}}</div>
					<div class="cart-col-3"><input formControlName="quantity" class="quantityInput"></div>
					<div class="cart-col-4">{{item.value?.lineValue}}</div>
<!--					15.0 dodaję ikonę usuwania:-->
					<div class="cart-col-5">
						<button mat-icon-button (click)="deleteItem(item.value?.id)"><mat-icon>delete</mat-icon></button>
					</div>
				</div>
			</div>
		</div>
<!--		14.2 dodaję guzik z aktualizacją koszyka:-->
		<div class="card-row" fxLayoutAlign="end start">
			<button mat-flat-button color="accent" (click)="submit()">Zaktualizuj koszyk</button>
		</div>
		<div fxLayoutAlign="end start">
			<div class="summary"> Wartość: </div>
			<div class="summary"> <b>{{summary?.summary?.grossValue}}</b></div>
		</div>
	</div>
</form>
<!--18.1 tu też zmieniam:-->
<div *ngIf="!summary?.items?.length">
	Koszyk jest pusty
</div>